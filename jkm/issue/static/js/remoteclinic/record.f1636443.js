webpackJsonp([50],{BsyJ:function(t,e,i){"use strict";var s=o(i("/5sW")),a=o(i("JhFi")),n=i("yt7g");function o(t){return t&&t.__esModule?t:{default:t}}i("paoi"),new s.default({el:"#record",render:function(t){return t(a.default)}}),s.default.filter("fmat",function(t){if(t)return(0,n.dateFormat)(parseInt(t),"Y-m-d G:i")})},H3YX:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"record"},[s("div",{staticClass:"record-head-top"},[s("headTop"),t._v(" "),s("headline",{attrs:{headtxt:"预约",none:""}}),t._v(" "),s("div",{staticClass:"record-head"},[s("div",{staticClass:"record-head-left"},[t._v("\n\t  \t\t\t\t姓名"),s("div",{staticClass:"name-text"},[s("input",{staticClass:"name",attrs:{type:"text",placeholder:"请输入"},on:{input:function(e){t.seartext(e.targe)}}})])]),s("div",{staticClass:"record-head-center"},[t._v("\n\t  \t\t\t日期"),s("div",{class:["time","hidetime",t.isinputhide?"opcinput":"showinput"],on:{click:function(e){return e.stopPropagation(),t.clicktime(e)}}},[s("date-picker",{attrs:{date:t.startTime,option:t.option,limit:t.limit}})],1),t._v(" "),t.isinputhide?s("div",{staticClass:"time",on:{click:function(e){return e.stopPropagation(),t.hideinput(e)}}},[s("input",{staticClass:"hideinput",attrs:{type:"text",placeholder:"请选择"}})]):t._e()]),s("div",{staticClass:"record-head-right"},[t._v("\n\t  \t\t\t状态"),s("div",{staticClass:"status-text"},[s("select",{staticClass:"status-select",attrs:{name:"status-select"},on:{change:t.changestatus}},[s("option",{attrs:{value:"all"}},[t._v("全部")]),t._v(" "),s("option",{attrs:{value:"Finish"}},[t._v("已完成")]),t._v(" "),s("option",{attrs:{value:"Pending"}},[t._v("预约中")]),t._v(" "),s("option",{attrs:{value:"Canceled"}},[t._v("已取消")])])])])])],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.startTime.time,expression:"startTime.time"}],staticStyle:{position:"absolute",top:"-10%",opacity:"0"},attrs:{type:"text"},domProps:{value:t.startTime.time},on:{change:t.changeint,input:function(e){e.target.composing||t.$set(t.startTime,"time",e.target.value)}}}),t._v(" "),s("div",{staticClass:"record-content"},[t._m(0),t._v(" "),s("ul",{staticClass:"record-list"},[t._l(t.details,function(e,i){return[s("li",{staticClass:"record-item"},[s("div",{staticClass:"make-time"},[t._v("\n\t\t  \t\t\t\t"+t._s(t._f("fmat")(e.appointTime))+"\n\t\t  \t\t\t")]),s("div",{staticClass:"make-bumber"},[t._v("\n\t\t  \t\t\t\t"+t._s(e.id)+"\n\t\t  \t\t\t")]),s("div",{staticClass:"make-name"},[t._v("\n\t\t  \t\t\t\t"+t._s(e.pName)+"\n\t\t  \t\t\t")]),s("div",{staticClass:"make-paly"},[t._v("\n\t\t  \t\t\t\t"+t._s(t._f("fmat")(e.startTime))+"\n\t\t  \t\t\t")]),s("div",{staticClass:"make-doctor"},[t._v("\n\t\t  \t\t\t\t"+t._s(e.dName)+"\n\t\t  \t\t\t")]),s("div",{staticClass:"make-status"},["Revisiting"==e.status?s("span",{staticClass:"Revisiting Pending"},[t._v("已就诊")]):"Finish"==e.status?s("span",{staticClass:"Finish"},[t._v("已完成")]):"Pending"==e.status||"Success"==e.status?s("span",{staticClass:"Pending"},[t._v("预约成功")]):"Waiting"==e.status||"Calling"==e.status?s("span",{staticClass:"Pending"},[t._v("候诊中")]):"Missed"==e.status?s("span",{staticClass:"Canceled"},[t._v("已过号")]):"Canceled"==e.status?s("span",{staticClass:"Canceled"},[t._v("已取消")]):"Disabled"==e.status?s("span",{staticClass:"Canceled"},[t._v("已失效")]):"Unpaid"==e.status?s("span",{staticClass:"Unpaid"},[t._v("待支付")]):"Visiting"==e.status?s("span",{staticClass:"Revisiting Pending"},[t._v("已就诊")]):s("span",{staticClass:"Pending"},[t._v("未完成")])])])]})],2)]),t._v(" "),t.isvideo?s("div",{staticClass:"win-video"},[s("div",{staticClass:"win-video-content"},[s("div",{staticClass:"video-content-left"},[s("div",{staticClass:"video-left-bottom"},[s("img",{staticClass:"vi-icon",attrs:{src:t.videodetail.doctorHeadUrl?t.videodetail.doctorHeadUrl:t.headUrl}}),t._v(" "),s("p",{staticClass:"vd-nam"},[t._v(t._s(t.videodetail.doctorName))]),s("p",{staticStyle:{"font-weight":"bold"}},[s("span",{staticStyle:{"margin-right":"5px"}},[t._v(t._s(t.videodetail.department))]),s("span",[t._v(t._s(t.videodetail.profession))])]),t._m(1),t._v(" "),s("p",{staticStyle:{"margin-top":"25px","margin-bottom":"5px","text-align":"left",padding:"0 10px"}},[s("span",[t._v("医院：")]),t._v(t._s(t.videodetail.organization))]),t._v(" "),s("p",{staticStyle:{"text-align":"left",padding:"0 10px"}},[s("span",[t._v("擅长：")]),t._v(t._s(t.videodetail.description))])])]),s("div",{staticClass:"video-content-roght"},[t.issucess?s("p",{staticClass:"wait-time"},[s("span",{staticClass:"timenum"},[t._v(t._s(t.lasttimer))]),t._v("s后自动过号")]):t._e(),t._v(" "),t.issucess?t._e():s("p",{staticClass:"wait-time-text"},[t._v("等待叫号不要离开")]),t._v(" "),s("div",{staticClass:"patient-mess"},[s("P",[s("img",{attrs:{src:t.videodetail.patientHeadUrl?t.videodetail.patientHeadUrl:t.headUrl}}),t._v(t._s(t.videodetail.patientName))])],1),t._v(" "),t.issucess?t._e():s("div",{staticClass:"wait-detail"},[s("p",[t._v("前面还有"),s("span",[t._v(t._s(t.frontNum))]),s("span",[t._v("人")])]),t._v(" "),s("p",[t._v("预计还需等待  "),t.frontNum?s("span",{staticStyle:{color:"#333","font-size":".4rem"}},[t._v(t._s(5*t.frontNum))]):t._e(),t._v(" 分钟")])]),t._v(" "),t.issucess?s("div",{staticClass:"wait-success"},[t._v("\n  \t\t\t\t\t请就诊\n  \t\t\t\t")]):t._e(),t._v(" "),t.issucess?t._e():s("div",{staticClass:"wait-hint",on:{click:function(e){return e.stopPropagation(),t.closevideo(e)}}},[s("p",[t._v("我知道了")])]),t._v(" "),t.issucess?s("div",{staticClass:"wait-btn"},[s("p",{staticClass:"canceljoin",on:{click:function(e){e.stopPropagation(),t.missClinic(t.videoid)}}},[t._v("过号")]),s("p",{staticClass:"joinroom",on:{click:function(e){t.gotojoin(t.videoid)}}},[t._v("进入诊室")])]):t._e()]),t._v(" "),s("div",{staticClass:"vi-close",on:{click:function(e){return e.stopPropagation(),t.closevideo(e)}}},[s("img",{attrs:{src:i("JA1j")}})])])]):t._e(),t._v(" "),t.iscancel?s("div",{staticClass:"win-cancel"},[s("div",{staticClass:"win-cancel-content"},[s("p",{staticClass:"cancel-hint"},[t._v("温馨提示")]),t._v(" "),s("p",{staticClass:"cancel-hint-text"},[t._v("再次预约需要重新挂号排队，是否确定要取消本次预约？")]),t._v(" "),s("div",{staticClass:"win-cancel-btn"},[s("div",{staticClass:"cancel-btn-left",on:{click:function(e){return e.stopPropagation(),t.closecancel(e)}}},[t._v("再想想")]),s("div",{staticClass:"cancel-btn-right",on:{click:function(e){e.stopPropagation(),t.surecancel(t.videoid)}}},[t._v("是的，我要取消")])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"record-content-head"},[e("div",{staticClass:"make-time"},[this._v("\n  \t\t\t\t预约时间\n  \t\t\t")]),e("div",{staticClass:"make-bumber"},[this._v("\n  \t\t\t\t预约号码\n  \t\t\t")]),e("div",{staticClass:"make-name"},[this._v("\n  \t\t\t\t姓名\n  \t\t\t")]),e("div",{staticClass:"make-paly"},[this._v("\n  \t\t\t\t计划时间\n  \t\t\t")]),e("div",{staticClass:"make-doctor",staticStyle:{width:"12%"}},[this._v("\n  \t\t\t\t预约医生\n  \t\t\t")]),e("div",{staticClass:"make-status"},[this._v("\n  \t\t\t\t状态\n  \t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"vi-status"},[this._v("坐诊中")])])}]};e.a=s},JhFi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("MoTF"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);var o=i("H3YX");var c=function(t){i("uGbS")},r=i("VU/8")(a.a,o.a,!1,c,null,null);e.default=r.exports},MoTF:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s,a=v(i("bOdI")),n=i("vMlw"),o=v(i("oM3R")),c=v(i("35/Y")),r=i("yt7g"),l=v(i("i+gI")),d=v(i("tYJO"));function v(t){return t&&t.__esModule?t:{default:t}}var u=null,m=null;e.default=(s={name:"record",components:{},data:function(){return{details:[],thirdUniqueId:"",tex:"",start:"",intertime:"",startTime:{time:""},option:{type:"day",week:["一","二","三","四","五","六","日"],month:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],format:"YYYY-MM-DD",placeholder:"请选择",inputStyle:{display:"inline-block",padding:"6px","line-height":"22px","font-size":"16px",border:"1px solid #eee","box-shadow":"0","border-radius":"2px",color:"#5F5F5F",width:"90px"},color:{header:"#ccc",headerText:"#f00"},buttons:{ok:"Ok",cancel:"Cancel"},overlayOpacity:.5,dismissible:!0},timeoption:{type:"min",week:["一","二","三","四","五","六","日"],month:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],format:"YYYY-MM-DD HH:mm"},multiOption:{type:"multi-day",week:["一","二","三","四","五","六","日"],month:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],format:"YYYY-MM-DD HH:mm"},limit:[{type:"weekday",available:[0,1,2,3,4,5,6]},{type:"fromto",from:"2019-04-02",to:"2030-02-20"}],issucess:!1,isvideo:!1,iscancel:!1,isinputhide:!0,lasttimer:30,frontNum:"",videoid:"",headUrl:d.default,videodetail:{},isonce:!1}},methods:{gotodoctor:function(){window.location.href="experts.html"},clicktime:function(){var e=this;if(e.isinputhide=!1,e.isonce=!0,(0,r.empty)(e.startTime.time))s="",a="";else var i=e.startTime.time+" 0:0:0",s=new Date(i).getTime(),a=parseInt(s)+864e5;var n=t(".status-select").val(),o=t(".name").val();e.isonce&&e.getrecord(o,s,a,n)},gotojoin:function(t){this.showtoast("敬请期待"),this.getdoctordetail(t,"join")},gotohint:function(t){this.videoid=t,this.showtoast("未在工作时间")},goshowvideo:function(t){var e=this;e.issucess=!1,e.creatromeid(t),e.frontNum="",setTimeout(function(){e.getdoctordetail(t,"wait"),e.isvideo=!0},100)},gotocancel:function(){this.iscancel=!0},surecancel:function(){},closecancel:function(){this.iscancel=!1},hideinput:function(){this.isinputhide=!1},getphoneCode:function(){var t=this,e=t.lasttimer;clearInterval(u),u=setInterval(function(){e>1?(e--,t.lasttimer=e):(t.lasttimer=30,t.isvideo=!1,clearInterval(u))},1e3)},getrecord:function(t,e,i,s){var a=this,o={name:t,startTime:e,status:s,endTime:i,thirdUniqueId:a.thirdUniqueId};(0,n.getOutpatientHistory)(o).then(function(t){a.details=t.details}).catch(function(t){a.alertDefault({text:t.data.resultMessage})})},changeint:function(){console.log("1111")},initialize:function(){setTimeout(function(){var e=document.body.clientHeight-t(".record-head-top").height()-60-15;t(".record-list").css("max-height",e+"px")},500)},seartext:function(e){if((0,r.empty)(this.startTime.time))s="";else var i=this.startTime.time+" 0:0:0",s=new Date(i).getTime(),a=parseInt(s)+864e5;var n=t(".status-select").val(),o=t(".name").val();this.getrecord(o,s,a,n)},changestatus:function(){var e=this;if((0,r.empty)(e.startTime.time)||e.isinputhide)i="",s="";else{e.startTime.time;var i=new Date(e.startTime.time).getTime(),s=parseInt(i)+864e5}var a=t(".status-select").val(),n=t(".name").val();e.tex=n,e.getrecord(n,i,s,a)},getdoctordetail:function(t,e){var i=this;i.videoid=t;var s={clinicAppointmentId:t};(0,n.clinicAppointmentAccess)(s).then(function(s){var a=s;i.videodetail=s;var n=a.doctorHeadUrl,o=a.doctorName,c=a.profession,r=a.organization,l=a.department,d=a.patientHeadUrl,v=a.patientName,m=a.patientGender,p=a.patientAge,h=a.patientId;"join"==e?(window.android.startVideo(t,n,o,c,"坐诊中",r,l,d,v,m,p,h),i.lasttimer=30,i.isvideo=!1,clearInterval(u)):i.getvideodetail()}).catch(function(t){i.showtoast(t.data.resultMessage)})},creatromeid:function(t){var e=this,i={clinicAppointmentId:t,videoRoomId:t};(0,n.submitAppointmentRoomId)(i).then(function(t){}).catch(function(t){e.showtoast(t.data.resultMessage)})},closevideo:function(){this.isvideo=!1,this.lasttimer=30,clearInterval(u),clearInterval(m)},getvideodetail:function(){var t=this;clearInterval(m),(0,n.queryClinicAppointmentInfo)({clinicAppointmentId:t.videoid}).then(function(e){var i=parseInt(e.videoRoomId),s=e.frontNum;t.videoRoomId=i,t.frontNum=s,s<1?(t.issucess=!0,clearInterval(m),t.getphoneCode()):t.setintvideo()}).catch(function(e){t.showtoast(e.data.resultMessage)})},setintvideo:function(){var t=this;m=setInterval(function(){t.getvideodetail()},1200)},missClinic:function(t){var e=this,i={clinicAppointmentId:t};(0,n.missClinicAppointment)(i).then(function(t){e.lasttimer=30,e.isvideo=!1,clearInterval(u),e.showtoast("过号成功")}).catch(function(t){e.showtoast(t.data.resultMessage)})},visitClinic:function(t){visitClinicAppointment({clinicAppointmentId:t}).then(function(t){}).catch(function(t){})}}},(0,a.default)(s,"components",{headTop:o.default,headline:c.default,"date-picker":l.default}),(0,a.default)(s,"created",function(){var t=this,e=(0,r.getURLParameter)("personId");e&&sessionStorage.setItem("personId",e);var i=sessionStorage.getItem("doctorMsg"),s=JSON.parse(i),a=new Date,n=(0,r.dateFormat)(a.getTime(),"Y-m-d"),o=(0,r.dateFormat)(a.getTime(),"Y-m-d")+" 0:0:0",c=new Date(o).getTime();t.start=parseInt(c),t.intertime=parseInt(c)+864e5,t.thirdUniqueId=s.doctorId||417314456,t.startTime.time=n,t.getrecord(),t.initialize()}),(0,a.default)(s,"mounted",function(){}),(0,a.default)(s,"watch",{"startTime.time":function(e){if((0,r.empty)(this.startTime.time))s="";else var i=this.startTime.time+" 0:0:0",s=new Date(i).getTime(),a=parseInt(s)+864e5;var n=t(".status-select").val(),o=t(".name").val();this.isonce&&this.getrecord(o,s,a,n)}}),s)}).call(e,i("7t+N"))},uGbS:function(t,e){}},["BsyJ"]);
//# sourceMappingURL=record.f1636443.js.map